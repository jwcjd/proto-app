function __appSendMenuId(o){pvlog.options.previd=o,pvlog.send(o)}!function(o,t){function n(o){this.options={that:$("body"),thisid:null,previd:null,page:".swiper_slide, .content-tab",pagebtn:".nav_wrap, .nav-all, .nav-flat",pagebtnItm:"[data-pagebtnItm],.nav_item",actbtn:".switch_item, .filter_item, .service_list_more",pageid:0,pageidx:"[data-index]",logUri:null,poccode:"",APP_VERSION:"",refdomain:"",refflag:0,refkey:[["naver.","W101"],["daum.","W102"],["google.","W103"],["zum.","W104"],["yahoo.","W105"],["facebook.","W201"],["twitter.","W202"],["story.kakao.","W204"],["kakao.","W203"],["aztalk.melon.","W401"],["store.melon.","W402"],["ticket.melon.","W403"],["showwing.melon.","W404"],["me2.do","W901"],["tistory.","W902"],["melon.",""]]};for(var t in o)this.options[t]=o[t]}n.prototype={version:"1.0.0",isinit:-1,init:function(){var o=this;o._get_pocid(),o._setvar(),o.isinit<0&&(o.isinit=0)},set:function(o){var i=this,n=0;o&&(n=o);var e=null,p=null;if(i.isinit<0)i.init();else if(i._setvar(),e=i._get_logtag(i.options.that,n)){p=e.attr("menu-id");if(i.options.logUri=e.data("logging"),p?i.options.thisid=p:i.options.logUri&&(i.options.thisid=i.options.logUri.split("%5E")[4]),"AS40"==i.options.poccode||"IS40"==i.options.poccode)i.options.APP_VERSION&&i.options.APP_VERSION.length>0&&parseInt(i.options.APP_VERSION)>=4&&parseInt(i.options.APP_VERSION)<5?t.location.href="melonapp://webview/request/menuId?menuId="+i.options.thisid:parseInt(i.options.APP_VERSION)<4&&pvlog.send();else if("AS20"==i.options.poccode||"IS20"==i.options.poccode){var s=getCookie("melonlogging");i.options.previd=s,i.send(i.options.previd);setCookie("melonlogging",i.options.thisid,10,"/",".melon.com")}}},send:function(o){var n=this,e=null;if(n.options.logUri){o&&(n.options.previd=o);var p=$.trim(getMemberKey());n.options.previd=void 0===n.options.previd||null==n.options.previd||"null"==n.options.previd?"":n.options.previd,p=$.trim(p).length<1||"undefined"==p||null==p||"null"==p?"0":p,n.options.poccode=void 0===n.options.poccode||null==n.options.poccode||"null"==n.options.poccode?"":n.options.poccode,n.options.APP_VERSION=void 0===n.options.APP_VERSION||null==n.options.APP_VERSION||"null"==n.options.APP_VERSION?"":n.options.APP_VERSION;var s="";if((e=(e=(e=(e=n.options.logUri.replace("@CR1@",$.trim(n.options.previd))).replace("@CR2@",p)).replace("@CR3@",$.trim(n.options.poccode))).replace("@CR4@",$.trim(n.options.APP_VERSION))).indexOf("@CR5@")>-1){if(n.options.refflag<1)if(t.referrer&&(s=new URL(t.referrer).hostname),void 0!==s&&s.length>0){for(n.options.refdomain="W999",i=0;i<n.options.refkey.length;i++)if(s.indexOf(n.options.refkey[i][0])>-1){n.options.refdomain=n.options.refkey[i][1];break}}else n.options.refdomain="";e=e.replace("@CR5@",n.options.refdomain),n.options.refflag=1,n.options.refdomain=""}n.options.logUri=e,$.ajax({url:n.options.logUri,cache:!0,async:!0,dataType:"script",success:function(o){},error:function(o){}})}},makeLogurl:function(o,t){var i=o,n=this;n.init();var e=null,p=0;if(t&&(p=t),i){var s=i.getResponseHeader("M-Log");if(s){e=s.split("%5E")[4];n.options.that.eq(p).find("[data-logging]")&&n.options.that.eq(p).find("[data-logging]").length>0&&n.options.that.eq(p).find("[data-logging]").remove(),n.options.that.eq(p).append($('<div style="display:none !important" data-logging='+s+" menu-id="+e+"></div>"))}}},_setvar:function(o){var t=this;if(void 0!==o&&null!=o)for(var i in o)t.options[i]=o[i];t.options.that="string"==typeof t.options.that?$(t.options.that):t.options.that,t.options.page="string"==typeof t.options.page?$(t.options.page):t.options.page,t.options.actbtn="string"==typeof t.options.actbtn?$(t.options.actbtn):t.options.actbtn,t.options.pagebtn="string"==typeof t.options.pagebtn?$(t.options.pagebtn):t.options.pagebtn;var n=$(t.options.pagebtn).find(t.options.pagebtnItm);t.options.pagebtnItm=void 0!==n&&null!=n&&n.length>0?n:t.options.pagebtn.children(),t.options.page&&(t.options.pagewrap=t.options.page.parent()),void 0!==t.options.page&&void 0!==t.options.pagewrap&&t.options.page.length>0&&(void 0!==t.options.page.data("menupage")&&null!=t.options.page.data("menupage")&&"except"==t.options.page.data("menupage")?(t.options.page=void 0,t.options.that=$("body")):t.options.pagewrap.is(":visible")&&(t.options.that=t.options.page,t.options.pagebtnItm=$(t.options.pagebtnItm),t.options.pagebtnItm&&t.options.pagebtnItm.length>0&&t.options.pagebtn.on("click",t.options.pagebtnItm,function(o){if(t.options.pageidx&&t.options.pageidx.length>0)if(t.options.pageidx.indexOf("data-")>-1)i=$(o.target).data("index");else var i=$(o.target).prop(t.options.pageidx);t.options.pageid=void 0!==i&&null!=i&&i>-1?i:$(this).index()})))},_resetvar:function(o){this._setvar({logUri:"",thisid:"",previd:""})},_get_pocid:function(){var o=this;if(o.options.poccode=$.trim(getCookie("POC")),!(void 0===o.options.poccode||null==o.options.poccode||"null"==o.options.poccode||o.options.poccode.length<3)){var t=o._get_appver();return t&&(o.options.APP_VERSION=t),o.options.poccode}$.ajax({async:!1,url:"/common/useragent_info.json",dataType:"json",error:function(o,t,i){return!1},success:function(t){if(t&&t.pocId){o.options.poccode=t.pocId;var i=o._get_appver();return i&&(o.options.APP_VERSION=i),o.options.poccode}return!1}})},_get_appver:function(){var o=this,t=navigator.userAgent;if(t&&o.options.poccode&&o.options.poccode.length>0){var i=t.indexOf(o.options.poccode);if(i>-1){var n=t.substring(i).split(";");return!!(n&&n.length>2)&&$.trim(n[2])}return!1}return!1},isLogtag:function(o,t){var i=this.options.that;if(void 0!==o&&null!=o&&(i="string"==typeof o?$(o):o),void 0!==t&&null!=t)n=i.eq(t).find("[data-logging]:last");else var n=i.find("[data-logging]:last");return!(void 0===n||null==n||n.length<=0)&&n},_get_logtag:function(o,t){var i=this;i.options.that=void 0!==o&&null!=o?o:i.options.that,i.options.pageid=void 0!==t&&null!=t?t:i.options.pageid;var n=i.isLogtag(i.options.that,i.options.pageid);return n||!1}},$(t).ready(function(){o.pvlog=new n,pvlog.init()}),$(o).load(function(){pvlog.options.that.length<=1&&pvlog.set()})}(window,document);